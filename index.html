<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Hattha Bank Mobile</title>
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto,
          sans-serif;
        background: linear-gradient(
          135deg,
          rgba(8, 165, 171, 1),
          rgba(7, 222, 231, 1)
        );
        min-height: 100vh;
        overflow-x: hidden;
        position: relative;
      }

      /* Animated background particles */
      .particles {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        pointer-events: none;
        z-index: 1;
      }

      .particle {
        position: absolute;
        width: 4px;
        height: 4px;
        background: rgba(255, 255, 255, 0.6);
        border-radius: 50%;
        animation: float 6s ease-in-out infinite;
      }

      @keyframes float {
        0%,
        100% {
          transform: translateY(0px) rotate(0deg);
          opacity: 0.6;
        }
        50% {
          transform: translateY(-20px) rotate(180deg);
          opacity: 1;
        }
      }

      .container {
        position: relative;
        z-index: 2;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        min-height: 100vh;
        text-align: center;
      }

      /* Glassmorphism card */
      .card {
        background: rgba(255, 255, 255, 0.1);
        backdrop-filter: blur(20px);
        padding: 3rem 2rem;
        border: 1px solid rgba(255, 255, 255, 0.2);
        box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
        width: 100%;
        animation: cardEntry 1s ease-out;
        position: relative;
        overflow-y: auto;
        overflow-x: hidden;
        height: 100vh;
        display: flex;
        flex-direction: column;
        justify-content: center;
      }

      .card-content {
        width: 100%;
        max-width: 500px;
        margin: 0 auto;
      }

      @keyframes cardEntry {
        from {
          opacity: 0;
          transform: translateY(50px) scale(0.9);
        }
        to {
          opacity: 1;
          transform: translateY(0) scale(1);
        }
      }

      /* Animated gradient border */
      .card::before {
        content: "";
        position: absolute;
        top: -2px;
        left: -2px;
        right: -2px;
        bottom: -2px;
        background: linear-gradient(
          45deg,
          #ff6b6b,
          #4ecdc4,
          #45b7d1,
          #96ceb4,
          #ffecd2
        );
        background-size: 400% 400%;
        /* border-radius: 32px; */
        z-index: -1;
        animation: gradientShift 4s ease-in-out infinite;
      }

      @keyframes gradientShift {
        0%,
        100% {
          background-position: 0% 50%;
        }
        50% {
          background-position: 100% 50%;
        }
      }

      .logo-container {
        position: relative;
        margin-bottom: 2rem;
      }

      .logo {
        width: 120px;
        height: auto;
        margin: 0 auto;
        display: flex;
        align-items: center;
        justify-content: center;
        /* box-shadow: 0 15px 35px rgba(0, 0, 0, 0.1); */
        /* animation: logoFloat 3s ease-in-out infinite; */
        position: relative;
        overflow: hidden;
      }

      @keyframes logoFloat {
        0%,
        100% {
          transform: translateY(0px);
        }
        50% {
          transform: translateY(-10px);
        }
      }

/*       .logo img {
        width: 90%;
        height: auto;
      } */

      h1 {
        color: white;
        font-size: 2.2rem;
        font-weight: 700;
        margin-bottom: 0.5rem;
        background: linear-gradient(45deg, #ffffff, #f0f0f0);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
        animation: textShimmer 3s ease-in-out infinite;
        margin-bottom: 1rem;
      }

      @keyframes textShimmer {
        0%,
        100% {
          background-position: 0% 50%;
        }
        50% {
          background-position: 100% 50%;
        }
      }

      .subtitle {
        color: rgba(255, 255, 255, 0.9);
        font-size: 1.1rem;
        margin-bottom: 2.5rem;
        line-height: 1.5;
        animation: fadeInUp 1s ease-out 0.3s both;
      }

      @keyframes fadeInUp {
        from {
          opacity: 0;
          transform: translateY(20px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      .download-buttons {
        display: flex;
        flex-direction: column;
        gap: 1rem;
        margin-bottom: 2rem;
      }

      .store-btn {
        display: flex;
        align-items: center;
        justify-content: space-between;
        padding: 1.2rem 1.5rem;
        background: rgba(255, 255, 255, 0.95);
        color: #333;
        text-decoration: none;
        border-radius: 20px;
        transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        position: relative;
        overflow: hidden;
        box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
        animation: fadeInUp 1s ease-out 0.6s both;
      }

      .store-btn:nth-child(2) {
        animation-delay: 0.8s;
      }

      .store-btn::before {
        content: "";
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background: linear-gradient(
          90deg,
          transparent,
          rgba(255, 255, 255, 0.6),
          transparent
        );
        transition: left 0.6s;
      }

      .store-btn:hover::before {
        left: 100%;
      }

      .store-btn:hover {
        transform: translateY(-5px) scale(1.02);
        box-shadow: 0 20px 40px rgba(0, 0, 0, 0.2);
        background: white;
      }

      .store-btn:active {
        transform: translateY(-2px) scale(1);
      }

      .store-info {
        text-align: left;
        flex-grow: 1;
      }

      .store-title {
        font-weight: 600;
        font-size: 1.1rem;
        margin-bottom: 0.2rem;
        color: #19b3a6;
      }

      .store-subtitle {
        font-size: 0.9rem;
        color: #666;
      }

      .store-icon {
        width: 32px;
        height: 32px;
        color: #19b3a6;
        transition: transform 0.3s ease;
      }

      .store-btn:hover .store-icon {
        transform: scale(1.2) rotate(10deg);
      }

      .features {
        display: grid;
        grid-template-columns: 1fr;
        gap: 1rem;
        margin-top: 2rem;
        animation: fadeInUp 1s ease-out 1s both;
      }

      .feature {
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 0.8rem;
        padding: 1rem;
        background: rgba(255, 255, 255, 0.1);
        border-radius: 15px;
        color: white;
        font-size: 1rem;
        font-weight: 600;
        backdrop-filter: blur(10px);
        border: 1px solid rgba(255, 255, 255, 0.1);
        transition: all 0.3s ease;
        position: relative;
        overflow: hidden;
      }

      .feature::before {
        content: "";
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background: linear-gradient(
          90deg,
          transparent,
          rgba(255, 255, 255, 0.1),
          transparent
        );
        transition: left 0.8s;
      }

      .feature:hover::before {
        left: 100%;
      }

      .feature:hover {
        transform: translateX(5px);
        background: rgba(255, 255, 255, 0.2);
      }

      .feature-icon {
        width: 20px;
        height: 20px;
        color: #4ecdc4;
      }

      .feature:nth-child(2) .feature-icon {
        animation-delay: -1.3s;
      }

      .feature:nth-child(3) .feature-icon {
        animation-delay: -2.6s;
      }

      /* Responsive design */
      @media (max-width: 480px) {
        .card {
          padding: 2rem 1.5rem;
        }

        h1 {
          font-size: 1.8rem;
        }

        .logo {
          width: 100px;
          height: 100px;
        }

        .store-btn {
          padding: 1rem 1.2rem;
        }
      }

      @media (max-width: 320px) {
        .card {
          justify-content: flex-start;
        }
      }

      /* Loading animation */
      .loading {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: linear-gradient(
          135deg,
          rgba(8, 165, 171, 1),
          rgba(7, 222, 231, 1)
        );
        display: flex;
        align-items: center;
        justify-content: center;
        z-index: 1000;
        animation: fadeOut 0.5s ease-out 2s forwards;
      }

      .loading-spinner {
        width: 60px;
        height: 60px;
        border: 4px solid rgba(255, 255, 255, 0.3);
        border-top: 4px solid white;
        border-radius: 50%;
        animation: spin 1s linear infinite;
      }

      @keyframes spin {
        0% {
          transform: rotate(0deg);
        }
        100% {
          transform: rotate(360deg);
        }
      }

      @keyframes fadeOut {
        to {
          opacity: 0;
          visibility: hidden;
        }
      }
    </style>
  </head>
  <body>
    <!-- Loading screen -->
    <div class="loading">
      <div class="loading-spinner"></div>
    </div>

    <div class="container">
      <div class="card">
        <div class="card-content">
          <!-- Animated background particles -->
          <div class="particles" id="particles"></div>
          <div class="logo-container">
            <div class="logo">
              <img
                src="https://www.hatthabank.com/uploads/images/news-events/Logo%20on%20white%20background.png"
                alt="Hattha Bank"
              />
            </div>
          </div>

          <h1>Hattha Bank Mobile</h1>

          <div class="download-buttons">
            <a
              href="https://apps.apple.com/us/app/hattha-mobile/id1493188010"
              class="store-btn"
              id="iosBtn"
            >
              <div class="store-info">
                <div class="store-title">Hattha Mobile</div>
                <div class="store-subtitle">Download for iPhone / iPad</div>
              </div>
              <svg class="store-icon" viewBox="0 0 24 24" fill="currentColor">
                <path
                  d="M18.71 19.5c-.83 1.24-1.71 2.45-3.05 2.47-1.34.03-1.77-.79-3.29-.79-1.53 0-2 .77-3.27.82-1.31.05-2.3-1.32-3.14-2.53C4.25 17 2.94 12.45 4.7 9.39c.87-1.52 2.43-2.48 4.12-2.51 1.28-.02 2.5.87 3.29.87.78 0 2.26-1.07 3.81-.91.65.03 2.47.26 3.64 1.98-.09.06-2.17 1.28-2.15 3.81.03 3.02 2.65 4.03 2.68 4.04-.03.07-.42 1.44-1.38 2.83M13 3.5c.73-.83 1.94-1.46 2.94-1.5.13 1.17-.34 2.35-1.04 3.19-.69.85-1.83 1.51-2.95 1.42-.15-1.15.41-2.35 1.05-3.11z"
                />
              </svg>
            </a>

            <a
              href="https://play.google.com/store/apps/details?id=com.kh.hkl.mobilebanking"
              class="store-btn"
              id="androidBtn"
            >
              <div class="store-info">
                <div class="store-title">Hattha Mobile</div>
                <div class="store-subtitle">Download for Android</div>
              </div>
              <svg class="store-icon" viewBox="0 0 24 24" fill="currentColor">
                <path
                  d="M17.523 15.3414c-.5511 0-.9993-.4486-.9993-.9997s.4482-.9993.9993-.9993c.5511 0 .9993.4482.9993.9993.0001.5511-.4482.9997-.9993.9997m-11.046 0c-.5511 0-.9993-.4486-.9993-.9997s.4482-.9993.9993-.9993c.5511 0 .9993.4482.9993.9993 0 .5511-.4482.9997-.9993.9997m11.4045-6.02l1.9973-3.4592a.416.416 0 00-.1518-.5972.416.416 0 00-.5972.1518l-2.0223 3.5046C15.5889 8.2231 13.8576 7.8948 12 7.8948s-3.5889.3283-5.1816.8994L4.7963 5.2896a.416.416 0 00-.5972-.1518.416.416 0 00-.1518.5972L6.0454 9.3214C2.7169 11.0593.7183 13.9753.7183 17.2997h22.5634c0-3.3244-1.9986-6.2404-5.3271-7.9783z"
                />
              </svg>
            </a>
          </div>

          <div class="features">
            <div class="feature">
              <svg class="feature-icon" viewBox="0 0 24 24" fill="white">
                <path
                  d="M12 1L3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5l-9-4z"
                />
              </svg>
              <span>Secure Banking</span>
            </div>
            <div class="feature">
              <svg class="feature-icon" viewBox="0 0 24 24" fill="white">
                <path
                  d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"
                />
              </svg>
              <span>Fast Transfers</span>
            </div>
            <div class="feature">
              <svg class="feature-icon" viewBox="0 0 24 24" fill="white">
                <path
                  d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"
                />
              </svg>
              <span>24/7 Access</span>
            </div>
          </div>
        </div>
      </div>
    </div>

    <script>
      handleShowButtonDownload();

      // Create animated particles
      function createParticles() {
        const particlesContainer = document.getElementById("particles");
        const particleCount = 50;

        for (let i = 0; i < particleCount; i++) {
          const particle = document.createElement("div");
          particle.className = "particle";
          particle.style.left = Math.random() * 100 + "%";
          particle.style.top = Math.random() * 100 + "%";
          particle.style.animationDelay = Math.random() * 6 + "s";
          particle.style.animationDuration = Math.random() * 3 + 3 + "s";
          particlesContainer.appendChild(particle);
        }
      }

      // Device detection and deep linking
      function detectDevice() {
        const userAgent =
          navigator.userAgent || navigator.vendor || window.opera;

        if (/iPad|iPhone|iPod/.test(userAgent) && !window.MSStream) {
          return "ios";
        } else if (/android/i.test(userAgent)) {
          return "android";
        }
        return "unknown";
      }

      function handleShowButtonDownload() {
        const device = detectDevice();

        if (device === "ios") {
          document.getElementById("androidBtn").style.display = "none";
        } else if (device === "android") {
          document.getElementById("iosBtn").style.display = "none";
        }
      }

      function handleAppDownload(platform) {
        const isIOS = platform === "ios";
        const isAndroid = platform === "android";

        // const statusMessage = document.getElementById("statusMessage");
        const container = document.querySelector(".container");

        // Get deeplink parameters
        const urlParams = new URLSearchParams(window.location.search);
        const path = urlParams.get("path") || "/";
        const action = urlParams.get("action") || "";
        const id = urlParams.get("id") || "";

        // Build app URL
        let appUrl = "hatthabank://";
        if (path !== "/") appUrl += path.replace(/^\//, "");

        const params = new URLSearchParams();
        if (action) params.append("action", action);
        if (id) params.append("id", id);

        if (params.toString()) {
          appUrl += (appUrl.includes("?") ? "&" : "?") + params.toString();
        }

        console.log("Attempting to open app:", appUrl);
        // statusMessage.textContent = "Opening app...";

        const startTime = Date.now();
        let hasTriedOpening = false;

        // Simplified approach: Try to open app, then quickly fallback
        function tryOpenApp() {
          if (hasTriedOpening) return;
          hasTriedOpening = true;

          if (isAndroid) {
            // Android: Try intent URL
            const intentUrl = `intent://${path.replace(
              /^\//,
              ""
            )}#Intent;scheme=hatthabank;package=com.kh.hkl.mobilebanking;end`;
            window.location.href = intentUrl;
          } else if (isIOS) {
            // iOS: Try app scheme
            window.location.href = appUrl;
          }

          console.log("App opening attempted");
        }

        // Quick detection with short timeout
        function showDownloadFallback() {
          container.classList.remove("checking");
          //   statusMessage.textContent = "Choose your platform:";
          //   document.getElementById("downloadButtons").style.display = "flex";
          console.log("Showing download fallback");
        }

        // Try opening app immediately
        tryOpenApp();

        // Simple timeout - if page is still visible after 1.5 seconds, show download
        setTimeout(() => {
          if (!document.hidden) {
            showDownloadFallback();
          }
        }, 1500);

        // If page becomes hidden quickly, app likely opened
        document.addEventListener(
          "visibilitychange",
          function () {
            if (document.hidden) {
              const timeTaken = Date.now() - startTime;
              if (timeTaken < 3000) {
                console.log("App opened (page hidden)");
                // statusMessage.textContent = "App opened!";
              }
            }
          },
          { once: true }
        );

        // If user comes back to page, show download
        window.addEventListener(
          "focus",
          function () {
            setTimeout(() => {
              if (hasTriedOpening) {
                showDownloadFallback();
              }
            }, 500);
          },
          { once: true }
        );
      }

      //   function handleAppDownload(platform) {
      //     const device = detectDevice();

      //     // Try to open the app first (deep link)
      //     const appSchemes = {
      //       ios: "hattha-mobile://",
      //       android: "intent://open#Intent;package=com.kh.hkl.mobilebanking;end",
      //     };

      //     if (device === platform && appSchemes[device]) {
      //       // Try to open the app
      //       window.location.href = appSchemes[device];

      //       // Fallback to store after a short delay
      //       setTimeout(() => {
      //         if (document.hidden || document.webkitHidden) {
      //           return; // App probably opened
      //         }
      //         // Redirect to store
      //         window.location.href =
      //           platform === "ios"
      //             ? "https://apps.apple.com/us/app/hattha-mobile/id1493188010"
      //             : "https://play.google.com/store/apps/details?id=com.kh.hkl.mobilebanking";
      //       }, 2000);
      //     }
      //   }

      // Add click handlers
      document.getElementById("iosBtn").addEventListener("click", function (e) {
        e.preventDefault();
        handleAppDownload("ios");
      });

      document
        .getElementById("androidBtn")
        .addEventListener("click", function (e) {
          e.preventDefault();
          handleAppDownload("android");
        });

      // Initialize particles when page loads
      window.addEventListener("load", () => {
        createParticles();
      });

      // Add parallax effect on mouse move
      document.addEventListener("mousemove", (e) => {
        const particles = document.querySelectorAll(".particle");
        const x = e.clientX / window.innerWidth;
        const y = e.clientY / window.innerHeight;

        particles.forEach((particle, index) => {
          const speed = ((index % 3) + 1) * 0.5;
          const translateX = (x - 0.5) * speed * 20;
          const translateY = (y - 0.5) * speed * 20;
          particle.style.transform = `translate(${translateX}px, ${translateY}px)`;
        });
      });

      // Add scroll-triggered animations
      const observerOptions = {
        threshold: 0.1,
        rootMargin: "0px 0px -50px 0px",
      };

      const observer = new IntersectionObserver((entries) => {
        entries.forEach((entry) => {
          if (entry.isIntersecting) {
            entry.target.style.animationPlayState = "running";
          }
        });
      }, observerOptions);

      // Observe all animated elements
      document.querySelectorAll(".feature, .store-btn").forEach((el) => {
        observer.observe(el);
      });
    </script>
  </body>
</html>
